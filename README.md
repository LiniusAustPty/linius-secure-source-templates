# Linius S3 Template

This repo contains an [AWS Cloudformation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html) template that will create an encrypted and private bucket in your organization that can be used with Linius Video Systems.

![Diagram](images/stack-diagram.png)

## How to create the Stack

1. To get started open up the [AWS Console](https://aws.amazon.com/console/) and go to the [Cloudformation](https://console.aws.amazon.com/cloudformation) service. You will need to do this with a user that has read/write permissions on the following resources:

	* Cloudformation
	* S3
	* IAM
	* Lambda
	* Cloudwatch

2. Next [create a stack](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html#GettingStarted.Walkthrough.createstack) by clicking on Create stack > With new resources (standard)
![CreateStack](images/create-stack1.png)
Go to Choose file and find the file `linius-s3-access.cf.yaml` file in this repository (should be in the `templates` directory). Once that's done click next to move onto the next step.

3. Specify the stack details by providing a name for the Cloudformation stack. This doesn't impact the name of any of the created resources, only the name of the cloudformation stack itself. You then have two parameters you can define if you choose to:

	* 	**BucketName:** will default to `linius-content-bucket-${YOUR_AWS_ACCOUNT_ID}` if you leave the default value
	*  **LambdaName:** Defaults to `linius-parser-function` but can be changed. Note, this also impacts the name of the Cloudwatch Log Group where any logs generated by parsed files is located.

	![CreateStack](images/create-stack2.png)

4. On the next page for configuring stack options you shouldn't need to change anything here unless your organization has any specific standards for Cloudformation deployments. Ask your AWS Administrator/Team if this is the case.

5. Finally review what the Stack will create and be sure to enable IAM capabilities before clicking on "Create stack"
![CreateStack](images/create-stack3.png) 

6. Once the stack finishes deploying you should have a private bucket created that can be used with Linius. The attached Lambda function makes sure to fix any filenames so that they work with our technology's standards.